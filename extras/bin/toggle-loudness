#!/bin/zsh
#
# To list all possible clients just type:
# pa_volume
#
# Usage:
#
# toggle-loudness {app} {elevated_volume}
#
# Example:
#
# toggle-loudness Chrome 170  # will elevate chrome volume to 170%
#
if [ ! $# -eq 2 ]; then
   echo "${cR}  Not enough${cZ} parameters, ${bW}usage:"
   echo ""
   echo "${bW}    toggle-loudness ${bY}{app} {elevated_volume}$cZ"
   echo ""
   echo "  Example:"
   echo ""
   echo "${bW}    toggle-loudness Chrome 170  ${cZ}# will elevate chrome volume to 170%"
   exit 1
fi

declare app=$1
declare loudness=$2

declare elevated=$(dic toggle "loudness.$app" true)
if [ "$elevated" = "true" ]; then
   notify.sh "Toggle Loudness" "$app - Loud volume ($loudness%)"
   pa_volume $app $loudness
else
   notify.sh "Toggle Loudness" "$app - Standard volume (100%)"
   pa_volume $app 100
fi
echo $state
